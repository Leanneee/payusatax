<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="CACHE-CONTROL" CONTENT="NO-CACHE">
    <title>SelectService</title>
    <link href="../../Content/css/jquery-ui.css" rel="stylesheet"/>
<link href="../../Content/css/jquery-ui.structure.min.css" rel="stylesheet"/>
<link href="../../Content/css/bootstrap.css" rel="stylesheet"/>
<link href="../../Content/css/jquery.webui-popover.min.css" rel="stylesheet"/>
<link href="../../Content/css/Custom.css" rel="stylesheet"/>
<link href="../../Content/css/devTeam.css" rel="stylesheet"/>

    <script src="../../Scripts/modernizr-2.8.3.js"></script>

    <link rel=icon href="../../Content/img/favicon.ico.html">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700,800' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>
    
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <link rel="stylesheet" type="text/css" href="../../Content/css/Print.css" media="print" />

    

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <style type="text/css">#warnModal {
            display: none;
        }

    </style>
</head>
<body onunload="deleteAllCookies()">
    <a tabindex="1" href="SelectService-prodType=I&amp;paymentProcess=1.html#main_content" class="skipToMainContent">Skip to main content</a>
    
<nav class="navbar navbar-default">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <a class="navbar-brand" id="logo" style="cursor: pointer;" tabindex="2"><img src="../../StaticContent/IRS/Images/payusaLogo.svg" height="60" alt="pay usa tax logo" class="stateLogo"></a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li><a href="../../index.html" tabindex="2">Casa</a></li>
                <li><a href="../Home/LoadStaticPage-pageName=TaxTypes.html" tabindex="2">Tipos De Impuestos Aceptados</a></li>
                <li><a href="../PaymentVerification/ShowPaymentVerification.html" tabindex="2">Verificaci&#243;n Del Pago</a></li>
                <li class="dropdown">
                    <a id="ddlLanguage" href="SelectService-prodType=I&amp;paymentProcess=1.html#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" tabindex="2">Idioma <span class="caret" aria-hidden="true"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="../../index.html">Ingl&#233;s</a></li>
                        <li><a href="../../index.html">Espa&#241;ol</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="SelectService-prodType=I&amp;paymentProcess=1.html#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" tabindex="2">Apoyo <span class="caret" aria-hidden="true"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="../Home/LoadStaticPage-pageName=AboutUs.html">Sobre Nosotros</a></li>
                        <li><a href="../Home/LoadStaticPage-pageName=FAQ.html">Preguntas Frecuentes</a></li>
                        <li><a target="_blank"  href="../Support/ContactUs.html">Cont&#225;ctenos</a></li>
                        <li><a target="_blank" href="../Support/ConvenienceFeeCalculator.html">Calculadora De Honorarios De Conveniencia</a></li>
                    </ul>
                </li>
                    <li><a href="../Login/MyAccount.html" tabindex="2">Iniciar Sesi&#243;n</a></li>

                    <li class="navbar-right"><img src="../../StaticContent/IRS/Images/IRS.svg" alt="IRS Logo" height="25" /></li>
            </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>



    <div id="sessionTimeoutWarning"></div>
    
    <a href="javascript:void(0);" id="main_content" class="secondarySkipToMainContent" tabindex="2">Main Content</a>
    



<section class="row center stepWrapper no-print">
    <div class="col-xs-3 step1">

                         <img src ='../../Content/img/steps/Spanish/desktop/Spanish_step1Arrow.svg' class="img-responsive" alt="Step one icon, Select Service" id="step1SpanishArrow">


    </div>
    <div class="col-xs-3 step2">
                        <img src='../../Content/img/steps/Spanish/desktop/Spanish_step2Square.svg' class="img-responsive" alt="Step two icon, Payment Details" id="step2SpanishSquare">


    </div>
    <div class="col-xs-3 step3">
                        <img src='../../Content/img/steps/Spanish/desktop/Spanish_step3Square.svg' class="img-responsive" alt="Step three icon, Review Information" id="step3SpanishSquare">


    </div>
    <div class="col-xs-3 step4">
                        <img src='../../Content/img/steps/Spanish/desktop/Spanish_step4Square.svg' class="img-responsive" alt="Step four icon, Payment Receipt" id="step4SpanishSquare">


    </div>
</section>


<section class="VpsContainer">
    <form id="selectServiceForm" name="selectServiceForm" method="POST" action="SelectService.html">
        <input name="__RequestVerificationToken" type="hidden" value="_AUvz4uMB7DT-AG19dqjoU6h9ebOtnS05ZaUSR35kxHeHKc_b8W9hsFb8i-lXAz-v8Ob7l-iOndbOWnw7WXxAxOPyye1inmxB2NgvNjZrnM1" />
        <input type="hidden" id="currentStage" name="CurrentStage" value="SelectService" />
        <input type="hidden" id="currentPage" value="SelectService" />
        <input type="hidden" name="TaxYear" id="TaxYearHidden" value="-1" />
        <input type="hidden" name="PayType" id="PayTypeHidden" />
        <input type="hidden" name="TaxQuarter" id="TaxQuarterHidden" value="NOT SELECTED" />
        <input type="hidden" name="TransactionDate" value="2/17/2019 4:36:14 PM" />
        <input type="hidden" name="ProfileId" />
        <input type="hidden" name="PaymentProcess" value="value" />
        <input type="hidden" name="CsrName" />
        <div class="main-content phoneWrapperPad">
            <div class="container">

                <h3 class="blue"><strong>Paso 1 - Seleccione su tipo de impuesto federal personal</strong></h3>
                <p style="font-size:small;">No utilice el bot&#243;n &quot;Atr&#225;s&quot; de su navegador. En su lugar, navegue usando los botones de abajo.</p>
        <p class="topText">
            O pagar una <a href="SelectService-prodType=B&amp;editPage=No.html" style="text-decoration: underline;" tabindex="10">Impuesto Federal Empresarial</a>
        </p>


                <div class="row">
                    <div class="col-sm-6 col-md-6 col-lg-4 padBelow">
                        <label for="MainTaxTypes" class="control-label">Categor&#237;a de pago<span class="warningRed">*</span></label>
                        <select class="select form-control" id="MainTaxTypes" name="PaymentCategories" tabindex="11">
                                <option value="Select" selected>Seleccione</option>
                            <option value="24">Pague su declaraci&#243;n de impuestos actual de 1040 2018</option>
                            <option value="34">Pague sus 1040 a&#241;os previos de declaraci&#243;n de impuestos</option>
                            <option value="35">Pague su Acuerdo de Presupuesto de 1040</option>
                            <option value="26">Pague su extensi&#243;n de impuestos (Formulario 4868)</option>
                            <option value="Other">Otros tipos</option>
                        </select>
                    </div>
                </div>


                <div class="row typeSelector" style='display: none;'>
                    <div class="col-sm-6 col-md-6 col-lg-4 padBelow">
                        <label for="otherTaxTypes" class="control-label">Tipo impositivo<span class="warningRed">*</span></label>
                        <select class="select form-control" id="otherTaxTypes" name="OtherTaxTypes" tabindex="12">
                                        <option value="Select" selected>Seleccione</option>

                        </select>
                    </div>
                </div>

                <p class="taxYear" id="TaxYearText" style='display: none;'>
                    <strong>A&#241;o fiscal: </strong><span id="TaxYearSpan">-1</span>
                </p>

                <div class="row" id="TaxYearDropDown" style='display: none;'>
                    <div class="col-sm-6 col-md-6 col-lg-4 padBelow">
                        <label for="TaxYears" class="control-label">A&#241;o fiscal<span class="warningRed">*</span></label>
                        <select class="select form-control" id="TaxYears" name="TaxYears" tabindex="13">
                        <option value="Select" selected>Seleccione</option>

                        </select>
                        <span class="field-validation-valid" data-valmsg-for="TaxYear" data-valmsg-replace="true"></span>
                    </div>
                </div>
                <div class="row">
                   
                </div>

                <p class="taxYear" id="TaxQuarterText" style='display: none;'>
                    <strong>Cuarto fiscal: </strong><span id="TaxQuarterSpan">NOT SELECTED</span>
                </p>

                <div class="row" id="TaxQuarterDropDown" style='display: none;'>
                    <div class="col-sm-4 col-lg-4 padBelow">
                        <label for="TaxQuarters" class="control-label">Cuarto fiscal<span class="warningRed">*</span></label>
                        <select class="select form-control" id="TaxQuarters" name="TaxQuarters" tabindex="14">
                                        <option value="Select" selected>Seleccione</option>

                        </select>
                    </div>
                </div>

                <div class="row" id="BalanceDueNoticeSection" style='display: none;'>
                    <div class="col-lg-12 padBelow">
                        <div class='checkbox'><input data-val="true" data-val-required="The Balance Due Check field is required." id="BalanceDueCheck" name="BalanceDueCheck" title="Marque la casilla si recibió un aviso de saldo debido del Servicio de Impuestos Internos." type="checkbox" value="true" /><input name="BalanceDueCheck" type="hidden" value="false" />Marque la casilla si recibió un aviso de saldo debido del Servicio de Impuestos Internos.</div>
                    </div>
                </div>

                <div id="Form4868AbroadNoticeSection" class="padAbove" style='display: none;'>
                    <p>Para los contribuyentes estadounidenses que viven en el extranjero, usted puede calificar para una extensi&#243;n adicional de dos meses si se cumple uno de los siguientes criterios:</p>

                    <ol>
                        <li>Usted vive fuera de los Estados Unidos y Puerto Rico y su principal lugar de trabajo est&#225; fuera de los Estados Unidos y Puerto Rico, o</li>
                        <li>Usted est&#225; en el servicio militar o naval fuera de los Estados Unidos y Puerto Rico</li>
                    </ol>

                    <p>Si cumple con uno de los criterios anteriores y desea la pr&#243;rroga autom&#225;tica de 2 meses para presentar su declaraci&#243;n de impuestos individuales, seleccione el bot&#243;n Continuar.</p>
                </div>

                <div id="WarningSection" class="padAbove" style='display: none;'>
                    <p id="BusinessNoticeParagraph" class="warningRed"></p>

                    <p id="WarningMessageParagraph" class="warningRed"></p>
                </div>


                <div class="row">
                    <div class="col-sm-6">
                        <p class="warningRed padAbove">*Campo requerido</p>
                    </div>
                </div>

                <div class="buttonWrapper2 phoneWrapperPad">
                <a href="../../index.html" class="clear firstButton btn btn-default" tabindex="21">Espalda</a>
                    <button type="submit" class="btn btn-primary" tabindex="22">Continuar</button>
                    
                </div>
            </div>
        </div>
    </form>
</section>




    

<div class="main-content phoneWrapperPad no-print">
    <div class="container">
        <hr />
        <section class="ipadMargin" id="footer" style="width: 90%;margin: auto;">
            <div class="row footWrapper">
                <div class="col-md-3 col-sm-12 col-xs-12 vps-logo">
                    <a target="_blank" href="https://www.valuepaymentsystems.com/index.html" tabindex="87"><img src="../../Content/img/vps-logo.svg" alt="powered by VPS logo"></a>
                </div>
                <div class="col-md-9 col-sm-12 col-xs-12 link-list">                   
                    <ul>
                        <li class="footerYear">&copy; Worldpay <span id="spanYear"></span>. Todos los derechos reservados</li>
                        <li><a target="_blank" href="../Home/LoadStaticPage-pageName=PayByPhone.html" tabindex="88">Pago por tel&#233;fono</a></li>
                        <li><a target="_blank" href="../Home/LoadStaticPage-pageName=PrivacyPolicy.html" tabindex="89">Pol&#237;tica de privacidad</a></li>
                    </ul>
                </div>
            </div>
        </section>
    </div>
</div> 



    <div id="pageLoadPrompt" class="overlay">
        <div class="overlay-content">
            <h2>Value Payment Systems</h2>
            <img id="loading" src="../../Content/img/ajax-loader.gif" alt="processing your request image" />
            <h3 id="prompt">Procesando su solicitud..</h3>
        </div>
    </div>

    <div id="warnModal">
        <h3 class="padAbove padBelow">El procedimiento perder&#225; toda la informaci&#243;n introducida. Pulse &quot;Cancelar&quot; para permanecer en la p&#225;gina actual o &quot;Continuar&quot; para volver a la p&#225;gina principal.</h3>
        <form class="form-inline" id="editForm">
            <div class="modal-footer">
                <button type="button" id="dialogCancel" class="btn btn-default" >Cancelar</button>
                <button type="button" id="dialogContinue" class="btn btn-primary" >Continuar</button>
            </div>
        </form>
    </div>

    <script src="../../Scripts/jquery-3.3.1.js"></script>
<script src="../../Scripts/jquery-ui-1.12.1.js"></script>

    
    <script src="../../Scripts/bootstrap.js"></script>
<script src="../../Scripts/respond.js"></script>

    <script src="../../Scripts/VendorScripts/jquery.validate.js"></script>
<script src="../../Scripts/VendorScripts/jquery.autotab.js"></script>
<script src="../../Scripts/VendorScripts/jquery.sessionTimeout.js"></script>
<script src="../../Scripts/VendorScripts/jquery.webui-popover.js"></script>
<script src="../../Scripts/VendorScripts/moment-with-locales.js"></script>
<script src="../../Scripts/VendorScripts/moment.js"></script>
<script src="../../Scripts/VendorScripts/print.js"></script>
<script src="../../Scripts/VendorScripts/respond.js"></script>
<script src="../../Scripts/VendorScripts/underscore.js"></script>

    
    <script src="../../Scripts/Utilities/bootstrapAlerts.js"></script>
<script src="../../Scripts/Utilities/idle-timer.js"></script>
<script src="../../Scripts/Utilities/js-cookie.js"></script>
<script src="../../Scripts/App/jqueryvalidationrules.js"></script>
<script src="../../Scripts/App/PaymentVerificationValidation.js"></script>
<script src="../../Scripts/App/WalletIntegration.js"></script>

    
    
    <script type="text/javascript">
        $(function() {
            var quarterlyFedIds = "43|44|45|46|47|48|49|50|";
            var prodType = "I";

            var formValidator = $("#selectServiceForm").validate({
                rules: {
                    PaymentCategories: {
                        checkSelect: "Select"
                    },
                    OtherTaxTypes: {
                        checkSelect: "Select"
                    },
                    TaxYears: {
                        checkSelect: "Select"
                    },
                    TaxQuarters: {
                        checkSelect: "Select"
                    },
                    CsrName: {
                        required: true,
                        maxlength: 10,
                        consecutiveSpaces: true
                    },
                },
                messages: {
                    PaymentCategories: {
                        checkSelect: "Seleccione un formulario de impuestos."
                    },
                    OtherTaxTypes: {
                        checkSelect: "Seleccione un formulario de impuestos."
                    },
                    TaxYears: {
                        checkSelect: "Seleccione un a&#241;o impositivo."
                    },
                    TaxQuarters: {
                        checkSelect: "Seleccione un Cuarto fiscal."
                    },
                    CsrName: {
                        required: "CsrId is required.",
                        maxlength: "CsrId cannot be more than 10 characters.",
                        consecutiveSpaces: "CsrId cannot have consecutive spaces."
                    }
                },
                submitHandler: function(form) {
                    console.log('form validation passed');
                    return true;
                }
            });

            $("#MainTaxTypes").on("change",
                function(e) {
                    e.preventDefault();
                    formValidator.resetForm();
                    $("#WarningSection").fadeOut();
                    $("#TaxYearText").fadeOut();
                    $("#TaxYearText").val("");
                    $("#TaxYearDropDown").fadeOut();
                    $(".typeSelector").fadeOut();
                    $("#TaxQuarterDropDown").fadeOut();
                    $("#BalanceDueNoticeSection").fadeOut();
                    $("#Form4868AbroadNoticeSection").fadeOut();
                    $("#IsSingleYear").val("False");   
                    //**for ContinueButton disable $("#btnSubmit").prop("disabled", true);

                    //On change of MainTaxTypes reset OtherTaxTypes to 'Please Select'
                    $("#otherTaxTypes option").filter(function () {
                        //may want to use $.trim in here
                        return $(this).text() === "Seleccione";
                    }).prop('selected', true);

                    var selectedValue = $(this).val();

                    if (selectedValue === "Other") {
                        var setUrlInfo = "/IRS/SelectService/SetPaymentCategory";
                        $.getJSON(setUrlInfo, { value: selectedValue, friendlyName: "Other Types", cat: "O" }, function () { });
                        $.getJSON("/IRS/SelectService/GetOtherTaxTypes",
                            null,
                            function(data) {
                                $("#otherTaxTypes option").remove();
                                $.each(data.TaxForms,
                                    function(index, item) {
                                        $("#otherTaxTypes")
                                            .append($("<option></option").text(item.text).val(item.value));
                                    });
                            });
                        $(".typeSelector").fadeIn();
                    } else {
                        if (prodType === "B") {
                            var businessTaxTypesUrl = "/IRS/SelectService/GetBusinessPayTypes";
                            var setUrl = "/IRS/SelectService/SetPaymentCategory";
                            $("#PayTypeHidden").val("");
                            $("#TaxYearHidden").val("-1");
                            $("#TaxQuarterHidden").val("NOT SELECTED")
                            $.getJSON(setUrl, { value: selectedValue, friendlyName: selectedValue, cat: "B" }, function () { });
                            businessTaxTypesUrl = businessTaxTypesUrl +
                                "?paySeries=" +
                                selectedValue;

                            $.getJSON(businessTaxTypesUrl,
                                null,
                                function(data) {
                                    $("#otherTaxTypes option").remove();
                                    $.each(data.TaxForms,
                                        function(index, item) {
                                            $("#otherTaxTypes")
                                                .append($("<option></option").text(item.text).val(item.value));
                                        });
                                    $(".typeSelector").fadeIn();
                                });
                            $(".typeSelector").fadeIn();
                        } else {
                            if (selectedValue !== "Select") {
                                getFriendlyName("#MainTaxTypes option:selected", selectedValue, "M");
                                $("#PayTypeHidden").val(selectedValue);
                                getTaxYears(selectedValue);
                                showNotices(selectedValue);
                            }
                        }
                    }
                });

            $("#otherTaxTypes").on("change",
                function(e) {
                    e.preventDefault();
                    formValidator.resetForm();
                    $("#WarningSection").fadeOut();
                    $("#Form4868AbroadNoticeSection").fadeOut();
                    $("#IsSingleYear").val("False");

                    $("#TaxYearText").fadeOut();
                    $("#TaxYearDropDown").fadeOut();

                    $("#TaxQuarterText").fadeOut();
                    $("#TaxQuarterDropDown").fadeOut();

                    $("#TaxQuarterDropDown").val("");
                    $("#TaxQuarterSpan").text("");

                    var fedProdId = $("#otherTaxTypes").val();
                    if (fedProdId !== "Select") {
                        getFriendlyName("#otherTaxTypes option:selected", fedProdId, "O");
                        $("#PayTypeHidden").val(fedProdId);

                        getTaxYears(fedProdId);
                        showNotices(fedProdId);
                        //**for ContinueButton disable $("#btnSubmit").prop("disabled", true);
                    }
                });

            function getFriendlyName(selector, fedProdId, callType) {
                var url = "/IRS/SelectService/GetFriendlyName";
                $.ajax({
                    url: url,
                    dataType: 'json',
                    data: { fedProdId: fedProdId },
                    success: function(data) {
                        $(selector).text(data);
                        if (callType === "O") {
                            var setInfoUrl = "/IRS/SelectService/SetOtherPayTypes";
                            $.getJSON(setInfoUrl, { value: fedProdId, friendlyName: data }, function() {});
                        } else {
                            var setUrl = "/IRS/SelectService/SetPaymentCategory";
                            $.getJSON(setUrl, { value: fedProdId, friendlyName: data, cat: callType }, function () { });
                        }
                    }
                });
            }

        function showNotices(fedProdId) {
            var url = "/IRS/SelectService/ShowNotices";
            url = url + "?fedProdId=" + fedProdId;
            $.getJSON(url,
                null,
                function(data) {
                    if (data.stopPayment === "STOPPAYMENT") {
                        var url = "/IRS/Home/StopPayment";
                        url = url + "?errorMessage=" + data.error;
                        window.location.href = url;
                    }
                    if (data.notice) {
                        $("#BusinessNoticeParagraph").text(data.notice);
                        $("#WarningSection").fadeIn();
                    }
                    if (data.warnings) {
                        $("#WarningMessageParagraph").text(data.warnings);
                        $("#WarningSection").fadeIn();
                    }
                    if (data.error) {
                        $("#WarningMessageParagraph").text(data.error);
                        $("#WarningSection").fadeIn();
                    }
                    if (data.balanceDueNotice) {
                        $("#BalanceDueNoticeSection").fadeIn();
                    }
                    if (data.showAbroadMessage) {
                        $("#Form4868AbroadNoticeSection").fadeIn();
                    }
                });
        }

        function getTaxYears(fedProdId) {
            $("#TaxYearDropDown").fadeOut();
            $("#TaxQuarterDropDown").fadeOut();

            var url = "/IRS/SelectService/GetTaxYears";
            url = url + "?fedProdId=" + fedProdId;
            $.getJSON(url,
                null,
                function(data) {
                    if (data.TaxYears.length === 2) {
                        $("#TaxYearSpan").text(data.TaxYears[1].text);
                        $("#TaxYearHidden").val(data.TaxYears[1].text);
                        $("#TaxYearText").fadeIn();
                        determineShowQuarter(fedProdId);
                        //**for ContinueButton disable $("#btnSubmit").prop("disabled", false);
                    } else if (data.TaxYears.length > 2) {
                        $("#TaxYears option").remove();
                        $.each(data.TaxYears,
                            function(index, item) {
                                $("#TaxYears").append($("<option></option").text(item.text).val(item.value));
                            });
                        $("#TaxYearDropDown").fadeIn();
                    }
                });
        }

        $("#TaxYears").on("change",
            function(e) {
                e.preventDefault();
                $("#TaxQuarterText").fadeOut();
                $("#TaxQuarterDropDown").fadeOut();

                $("#TaxYearHidden").val($(this).val());

                var fedProdId = $("#otherTaxTypes option:selected").val();
                determineShowQuarter(fedProdId);
            });

        function determineShowQuarter(fedProdId) {
            var fedProdIdList = quarterlyFedIds.split("|");
            for (var i = 0; i < fedProdIdList.length; i++) {
                if (fedProdIdList[i] === fedProdId) {
                    populateQuarterDropDown(fedProdId);
                    break;
                }
                //**for ContinueButton disable else {
                //**for ContinueButton disable     $("#btnSubmit").prop("disabled", false);
                //**for ContinueButton disable }
            }
        }

        function populateQuarterDropDown(fedProdId) {
            $("#TaxQuarters option").remove();
            
            var year = $("#TaxYearHidden").val();
            var url = "/IRS/SelectService/GetTaxQuarters";
            url = url + "?fedProdId=" + fedProdId + "&year=" + year;
            $.getJSON(url,
                null,
                function(data) {
                    if (data.TaxQuarters.length === 2) {
                        $("#TaxQuarterSpan").text(data.TaxQuarters[1].value);
                        $("#TaxQuarterHidden").val(data.TaxQuarters[1].value);
                        $("#TaxQuarterText").fadeIn();
                        //determineShowQuarter(fedProdId);
                    } else if (data.TaxQuarters.length > 2) {
                        $("#TaxQuarters option").remove();
                        $.each(data.TaxQuarters,
                            function(index, item) {
                                $("#TaxQuarters").append($("<option></option").text(item.text).val(item.value));
                            });
                        $("#TaxQuarterDropDown").fadeIn();
                        //**for ContinueButton disable $("#btnSubmit").prop("disabled", true);
                    }
                });
        }

        $("#TaxQuarters").on("change",
            function(e) {
                e.preventDefault();

                $("#TaxQuarterHidden").val($("#TaxQuarters option:selected").val());
                //**for ContinueButton disable $("#btnSubmit").prop("disabled", false);
            });

    });
    </script>


<script type="text/javascript">

        function deleteAllCookies() {
            var cookies = document.cookie.split(";");

            for (var i = 0; i < cookies.length; i++) {
                var cookie = cookies[i];
                var eqPos = cookie.indexOf("=");
                var name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;
                document.cookie = name + "=;expires=Thu, 01 Jan 1970 00:00:00 GMT";
            }
        }

        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] ||
                    function() {
                        (i[r].q = i[r].q || []).push(arguments)},
                i[r].l = 1 * new Date();
            a = s.createElement(o), m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)})(window, document, 'script', 'https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-7881608-22', 'auto');  ga('send', 'pageview');

    </script>

    <script type="text/javascript">
        function PageAnimation_Start() {
            console.log("Starting Page Load Prompt.");
            document.getElementById("pageLoadPrompt").style.width = "100%";
        }

        function PageAnimation_End() {
            console.log("Stoping Page Load Prompt.");
            document.getElementById("pageLoadPrompt").style.width = "0%";
        }
        $(function () {

            $('#spanYear').html(new Date().getFullYear());

            //$('html').removeClass('js');
            var idleTime = 900000; //900000; // number of miliseconds until the user is considered idle, test 3 seconds = 3000.  Set to 15 minutes = 900000
            var initialSessionTimeoutMessage = 'Your session will expire in <span id="sessionTimeoutCountdown"></span> seconds.<br /><br />Click on <b>OK</b> to continue your session.';
            var sessionTimeoutCountdownId = 'sessionTimeoutCountdown';
            var redirectAfter = 60; // number of seconds to wait before redirecting the user.
            var redirectTo = '/IRS/Home/SessionTimeout'; // URL to relocate the user to once they have timed out
            var keepAliveURL = '/IRS/Home/KeepAlive'; // URL to call to keep the session alive
            var expiredMessage = 'Your session has expired.  You are being logged out for security reasons.'; // message to show user when the countdown reaches 0
            var running = false; // var to check if the countdown is running
            var timer; // reference to the setInterval timer so it can be stopped

            window.PageAnimation_End();

            $('#warnModal').dialog({ autoOpen: false, modal: true, title: 'LOSE ALL INFORMATION?' });

            $('#logo')
                .click(function () {
                    var currentPage = $("#currentPage").val();
                    if (currentPage === "SelectService" ||
                        currentPage === "PaymentDetails" ||
                        currentPage === "ReviewInfo") {
                        $('#warnModal').dialog("open");
                    } else {
                        window.PageAnimation_Start();
                        $('#warnModal').dialog("close");
                        var url = "/IRS/Home/RedirectToHomePage";
                        window.location.href = url;
                    }
                });

            $(".showBusyAnimation").on("click", function () {
                window.PageAnimation_Start();
            });

            $('#dialogContinue').click(function () {
                window.PageAnimation_Start();
                $('#warnModal').dialog("close");
                var url = "/IRS/Home/RedirectToHomePage";
                window.location.href = url;
            });

            $('#dialogCancel').click(function () {
                $('#warnModal').dialog("close");
            });

            $("#Error1").removeClass("Show");
            $("#Error1").addClass("Hide");
            $("#Error2").removeClass("Hide");
            $("#Error2").addClass("Show");

            var languageCookie = Cookies.get('_language');

            if (!languageCookie) {
                languageCookie = 'en';
                $('html').attr('lang', languageCookie);
               // document.documentElement.setAttribute('lang', languageCookie);
            }
            else {
                $('html').attr('lang', languageCookie);
               // document.documentElement.setAttribute('lang', languageCookie);
            }

            $(window)
                .resize(function () {
                    var currentStage = $('#currentStage').val();
                    var languageCookie = Cookies.get('_language');
                    
                    if (!languageCookie) {
                        languageCookie = 'en';
                        $('html').attr('lang', languageCookie);
                    }
                    else {
                        $('html').attr('lang', languageCookie);
                    }

                    if (languageCookie.length > 2) {
                        languageCookie = languageCookie.substr(0, 2);
                        $('html').attr('lang', languageCookie);
                    }

                    if ($(window).width() < 800) {
                        $("#Error1").addClass("Show");
                        $("#Error1").removeClass("Hide");
                        $("#Error2").removeClass("Show");
                        $("#Error2").addClass("Hide");

                        if (currentStage === 'SelectService') {
                            if (languageCookie === 'en') {
                                $('#step1EnglishArrow')
                                    .attr({ src: '/Content/img/steps/English/phone/step1Arrow.svg' });
                            } else if (languageCookie === 'es') {
                                $('#step1SpanishArrow')
                                    .attr({ src: '/Content/img/steps/Spanish/phone/step1Arrow.svg' });
                            }
                        } else {
                            if (languageCookie === 'en') {
                                $('#step1EnglishSquare')
                                    .attr({ src: '/Content/img/steps/English/phone/step1Square.svg' });
                            } else if (languageCookie === 'es') {
                                $('#step1SpanishSquare')
                                    .attr({ src: '/Content/img/steps/Spanish/phone/step1Square.svg' });
                            }
                        }

                        if (currentStage === 'PaymentDetails') {
                            if (languageCookie === 'en') {
                                $('#step2EnglishArrow')
                                    .attr({ src: '/Content/img/steps/English/phone/step2Arrow.svg' });
                            } else if (languageCookie === 'es') {
                                $('#step2SpanishArrow')
                                    .attr({ src: '/Content/img/steps/Spanish/phone/step2Arrow.svg' });
                            }
                        } else {
                            if (languageCookie === 'en') {
                                $('#step2EnglishSquare')
                                    .attr({ src: '/Content/img/steps/English/phone/step2Square.svg' });
                            } else if (languageCookie === 'es') {
                                $('#step2SpanishSquare')
                                    .attr({ src: '/Content/img/steps/Spanish/phone/step2Square.svg' });
                            }
                        }

                        if (currentStage === 'PaymentReceipt') {
                            if (languageCookie === 'en') {
                                $('#step3EnglishArrow')
                                    .attr({ src: '/Content/img/steps/English/phone/step3Arrow.svg' });
                            } else if (languageCookie === 'es') {
                                $('#step3SpanishArrow')
                                    .attr({ src: '/Content/img/steps/Spanish/phone/step3Arrow.svg' });
                            }
                        } else {
                            if (languageCookie === 'en') {
                                $('#step3EnglishSquare')
                                    .attr({ src: '/Content/img/steps/English/phone/step3Square.svg' });
                            } else if (languageCookie === 'es') {
                                $('#step3SpanishSquare')
                                    .attr({ src: '/Content/img/steps/Spanish/phone/step3Square.svg' });
                            }
                        }

                        if (currentStage === 'ReviewInformation') {
                            if (languageCookie === 'en') {
                                $('#step4EnglishArrow')
                                    .attr({ src: '/Content/img/steps/English/phone/step4Arrow.svg' });
                            } else if (languageCookie === 'es') {
                                $('#step4SpanishArrow')
                                    .attr({ src: '/Content/img/steps/Spanish/phone/step4Arrow.svg' });
                            }
                        } else {
                            if (languageCookie === 'en') {
                                $('#step4EnglishSquare')
                                    .attr({ src: '/Content/img/steps/English/phone/step4Square.svg' });
                            } else if (languageCookie === 'es') {
                                $('#step4SpanishSquare')
                                    .attr({ src: '/Content/img/steps/Spanish/phone/step4Square.svg' });
                            }
                        }
                    } else {
                        $("#Error1").removeClass("Show");
                        $("#Error1").addClass("Hide");
                        $("#Error2").removeClass("Hide");
                        $("#Error2").addClass("Show");

                        if (currentStage === 'SelectService') {
                            if (languageCookie === 'en') {
                                $('#step1EnglishArrow')
                                    .attr({ src: '/Content/img/steps/English/desktop/step1Arrow.svg' });
                            } else if (languageCookie === 'es') {
                                $('#step1SpanishArrow')
                                    .attr({ src: '/Content/img/steps/Spanish/desktop/Spanish_step1Arrow.svg' });
                            }
                        } else {
                            if (languageCookie === 'en') {
                                $('#step1EnglishSquare')
                                    .attr({ src: '/Content/img/steps/English/desktop/step1Square.svg' });
                            } else if (languageCookie === 'es') {
                                $('#step1SpanishSquare')
                                    .attr({ src: '/Content/img/steps/Spanish/desktop/Spanish_step1Square.svg' });
                            }
                        }

                        if (currentStage === 'PaymentDetails') {
                            if (languageCookie === 'en') {
                                $('#step2EnglishArrow')
                                    .attr({ src: '/Content/img/steps/English/desktop/step2Arrow.svg' });
                            } else if (languageCookie === 'es') {
                                $('#step2SpanishArrow')
                                    .attr({ src: '/Content/img/steps/Spanish/desktop/Spanish_step2Arrow.svg' });
                            }
                        } else {
                            if (languageCookie === 'en') {
                                $('#step2EnglishSquare')
                                    .attr({ src: '/Content/img/steps/English/desktop/step2Square.svg' });
                            } else if (languageCookie === 'es') {
                                $('#step2SpanishSquare')
                                    .attr({ src: '/Content/img/steps/Spanish/desktop/Spanish_step2Square.svg' });
                            }
                        }

                        if (currentStage === 'PaymentReceipt') {
                            if (languageCookie === 'en') {
                                $('#step3EnglishArrow')
                                    .attr({ src: '/Content/img/steps/English/desktop/step3Arrow.svg' });
                            } else if (languageCookie === 'es') {
                                $('#step3SpanishArrow')
                                    .attr({ src: '/Content/img/steps/Spanish/desktop/Spanish_step3Arrow.svg' });
                            }
                        } else {
                            if (languageCookie === 'en') {
                                $('#step3EnglishSquare')
                                    .attr({ src: '/Content/img/steps/English/desktop/step3Square.svg' });
                            } else if (languageCookie === 'es') {
                                $('#step3SpanishSquare')
                                    .attr({ src: '/Content/img/steps/Spanish/desktop/Spanish_step3Square.svg' });
                            }
                        }

                        if (currentStage === 'ReviewInformation') {
                            if (languageCookie === 'en') {
                                $('#step4EnglishArrow')
                                    .attr({ src: '/Content/img/steps/English/desktop/step4Arrow.svg' });
                            } else if (languageCookie === 'es') {
                                $('#step4SpanishArrow')
                                    .attr({ src: '/Content/img/steps/Spanish/desktop/Spanish_step4Arrow.svg' });
                            }
                        } else {
                            if (languageCookie === 'en') {
                                $('#step4EnglishSquare')
                                    .attr({ src: '/Content/img/steps/English/desktop/step4Square.svg' });
                            } else if (languageCookie === 'es') {
                                $('#step4SpanishSquare')
                                    .attr({ src: '/Content/img/steps/Spanish/desktop/Spanish_step4Square.svg' });
                            }
                        }
                    }
                });

            // create the warning window and set autoOpen to false
            var sessionTimeoutWarningDialog = $("#sessionTimeoutWarning");
            $(sessionTimeoutWarningDialog).html(initialSessionTimeoutMessage);
            $(sessionTimeoutWarningDialog).dialog({
                title: 'Session Expiration Warning',
                autoOpen: false,    // set this to false so we can manually open it
                closeOnEscape: false,
                draggable: false,
                width: 460,
                minHeight: 50,
                modal: true,
                buttons: {
                    OK: function () {
                        // stop the timer
                        clearInterval(timer);

                        // stop countdown
                        running = false;

                        // ajax call to keep the server-side session alive
                        $.ajax({
                            method: 'GET',
                            url: keepAliveURL,
                            cache: false
                        });

                        // close dialog
                        $(this).dialog('close');
                    }
                },
                resizable: false,
                open: function () {
                    // scrollbar fix for IE
                    $('body').css('overflow', 'hidden');
                },
                close: function () {
                    // reset overflow
                    $('body').css('overflow', 'auto');
                }
            }); // end of dialog
            // jquery to add a title to the close button.
            $('.ui-dialog-titlebar-close').prop('title', 'Session Expiration Warning close button');


            //function resetValidation() {
            //    //Removes validation from input-fields
            //    $('.input-validation-error').addClass('input-validation-valid');
            //    $('.input-validation-error').removeClass('input-validation-error');
            //    //Removes validation message after input-fields
            //    $('.field-validation-error').addClass('field-validation-valid');
            //    $('.field-validation-error').removeClass('field-validation-error');
            //    //Removes validation summary
            //    $('.validation-summary-errors').addClass('validation-summary-valid');
            //    $('.validation-summary-errors').removeClass('validation-summary-errors');
            //}

            //$('#ExpirationMonth')
            //    .change(function () {
            //        resetValidation();
            //    });

            //$('#ExpirationYear')
            //    .change(function () {
            //        resetValidation();
            //    });

            //$('#Cvv')
            //    .change(function () {
            //        resetValidation();
            //    });

            // start the idle timer
            var sessionPages = ['SelectService', 'PaymentDetails', 'PaymentReceipt', 'ReviewInformation'];
            var currentStage = $('#currentStage').val();

            if ($.inArray(currentStage, sessionPages) >= 0) {
                $.idleTimer(idleTime);
            }

            // bind to idleTimer's idle.idleTimer event
            $(document).bind("idle.idleTimer", function (event, elem, obj) {
                // if the user is idle and a countdown isn't already running
                if (obj.idle && !running) {
                    var counter = redirectAfter;
                    running = true;

                    // intialisze timer
                    $('#' + sessionTimeoutCountdownId).html(redirectAfter);
                    // open dialog
                    $(sessionTimeoutWarningDialog).dialog('open');

                    // create a timer that runs every second
                    timer = setInterval(function () {
                        counter -= 1;

                        // if the counter is 0, redirect the user
                        if (counter === 0) {
                            $(sessionTimeoutWarningDialog).html(expiredMessage);
                            $(sessionTimeoutWarningDialog).dialog('disable');
                            running = false;
                            window.location = redirectTo;
                        } else {
                            $('#' + sessionTimeoutCountdownId).html(counter);
                        };
                    }, 1000);
                };
            });
        });
    </script>
</body>
</html>
